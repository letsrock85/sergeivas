[Sanity logo **Documentation**](https://www.sanity.io/docs)
Search or Ask AI...CTRL K

- Getting started



  - [Overview](https://www.sanity.io/docs/getting-started)
  - [Platform introduction](https://www.sanity.io/docs/getting-started/the-sanity-content-operating-system-an-introduction)
  - [Next.js quickstart](https://www.sanity.io/docs/next-js-quickstart)
  - [Nuxt.js quickstart](https://www.sanity.io/docs/nuxt-js-quickstart)
  - [Astro quickstart](https://www.sanity.io/docs/astro-quickstart)
  - [React Router quickstart](https://www.sanity.io/docs/react-router-quickstart)
  - [Studio quickstart](https://www.sanity.io/docs/sanity-studio-quickstart)

- Platform



  - [Build with AI](https://www.sanity.io/docs/ai)
  - [Content Lake](https://www.sanity.io/docs/content-lake)
  - [Functions](https://www.sanity.io/docs/functions)
  - [APIs and SDKs](https://www.sanity.io/docs/apis-and-sdks)
  - [Visual Editing](https://www.sanity.io/docs/visual-editing)
  - [Blueprints](https://www.sanity.io/docs/blueprints)
  - [Platform management](https://www.sanity.io/docs/platform-management)

- Apps



  - [Dashboard](https://www.sanity.io/docs/dashboard)
  - [Studio](https://www.sanity.io/docs/studio)
  - [Canvas](https://www.sanity.io/docs/canvas)
  - [Media Library](https://www.sanity.io/docs/media-library)
  - [App SDK](https://www.sanity.io/docs/app-sdk)
  - [Content Agent](https://www.sanity.io/docs/content-agent)

- Reference



  - [HTTP API](https://www.sanity.io/docs/http-reference)
  - [CLI](https://www.sanity.io/docs/cli-reference)
  - [Libraries](https://www.sanity.io/docs/libraries)
  - [Specifications](https://www.sanity.io/docs/specifications)

- Resources



  - [Changelog](https://www.sanity.io/docs/changelog)
  - [User guides](https://www.sanity.io/docs/user-guides)
  - [Developer guides](https://www.sanity.io/docs/developer-guides)
  - [Courses and certifications](https://www.sanity.io/learn)
  - [Join the community](https://snty.link/community)
  - [Templates](https://www.sanity.io/templates)

[Login](https://www.sanity.io/entry?ref=docs) [Get started](https://www.sanity.io/get-started?ref=docs)

Sanity logo

Search or Ask AI...CTRL K

[Login](https://www.sanity.io/entry?ref=docs) [Get started](https://www.sanity.io/get-started?ref=docs)

###### Content Lake (Datastore)

[Overview](https://www.sanity.io/docs/content-lake)

* * *

- Understanding Content Lake



[Technical limits](https://www.sanity.io/docs/content-lake/technical-limits)



[API Versioning](https://www.sanity.io/docs/content-lake/api-versioning)



[API CDN](https://www.sanity.io/docs/content-lake/api-cdn)



* * *

- Datasets and documents



[Datasets](https://www.sanity.io/docs/content-lake/datasets)



[Documents](https://www.sanity.io/docs/content-lake/documents)



[Drafts](https://www.sanity.io/docs/content-lake/drafts)



[IDs and Paths](https://www.sanity.io/docs/content-lake/ids)



[Perspectives](https://www.sanity.io/docs/content-lake/perspectives)



[Attribute limit](https://www.sanity.io/docs/content-lake/attribute-limit)



[Hot swap](https://www.sanity.io/docs/content-lake/how-to-use-hot-swapping-for-datasets)



[Cloud clone](https://www.sanity.io/docs/content-lake/how-to-use-cloud-clone-for-datasets)



[Backups](https://www.sanity.io/docs/content-lake/backups)



* * *

- Querying with GROQ



[Introduction](https://www.sanity.io/docs/content-lake/groq-introduction)



[How queries work](https://www.sanity.io/docs/content-lake/how-queries-work)



[Custom functions](https://www.sanity.io/docs/content-lake/custom-groq-functions)



[Query cheat sheet](https://www.sanity.io/docs/content-lake/query-cheat-sheet)



[Vision plugin](https://www.sanity.io/docs/content-lake/the-vision-plugin)



[Syntax reference](https://www.sanity.io/docs/specifications/groq-syntax)



[GROQ @ Sanity Learn](https://www.sanity.io/learn/course/between-groq-and-a-hard-place)



* * *

- Querying with GraphQL



[Introduction](https://www.sanity.io/docs/content-lake/graphql)



[GROQ and GraphQL](https://www.sanity.io/docs/content-lake/what-about-graphql)



* * *

- Mutations



[Introduction to document mutations](https://www.sanity.io/docs/content-lake/mutations-introduction)



[Mutate documents with actions](https://www.sanity.io/docs/content-lake/dispatch-actions)



[Transactions](https://www.sanity.io/docs/content-lake/transactions)



[Patches](https://www.sanity.io/docs/content-lake/http-patches)



[Document mutation patterns](https://www.sanity.io/docs/content-lake/mutation-patterns)



* * *

- Assets



[Introduction](https://www.sanity.io/docs/content-lake/assets)



[Upload, query, and delete assets](https://www.sanity.io/docs/content-lake/manage-assets)



[Metadata](https://www.sanity.io/docs/apis-and-sdks/image-metadata)



[Transformations](https://www.sanity.io/docs/apis-and-sdks/image-urls)



[IIIF](https://www.sanity.io/docs/apis-and-sdks/iiif-api-reference)



* * *

- Content Operations



[Importing Data](https://www.sanity.io/docs/content-lake/importing-data)



[Restore a deleted dataset from a backup](https://www.sanity.io/docs/content-lake/restore-deleted-dataset)



[Migrating your schema and content](https://www.sanity.io/docs/content-lake/schema-and-content-migrations)



[Content migration cheat sheet](https://www.sanity.io/docs/content-lake/content-migration-cheatsheet)



[Schema migration principles](https://www.sanity.io/docs/content-lake/important-considerations-for-schema-and-content-migrations)



[Schema change course @ Sanity Learn](https://www.sanity.io/learn/course/handling-schema-changes-confidently/introduction-to-schema-change-management)



* * *

- Real-time and dynamic content



[Perspectives for preview and presentation](https://www.sanity.io/docs/content-lake/presenting-and-previewing-content)



[Live Content API](https://www.sanity.io/docs/content-lake/live-content-api)



[Listening API](https://www.sanity.io/docs/content-lake/realtime-updates)



* * *

- Webhooks



[Introduction](https://www.sanity.io/docs/content-lake/webhooks)



[Best practices](https://www.sanity.io/docs/content-lake/webhook-best-practices)



[HTTP API reference](https://www.sanity.io/docs/http-reference/webhooks)



[Toolkit (JS)](https://github.com/sanity-io/webhook-toolkit)



* * *

- Embeddings (Experimental)



[Introduction](https://www.sanity.io/docs/content-lake/embeddings-index-api-overview)



[Create and query an embeddings index](https://www.sanity.io/docs/content-lake/create-query-embeddings-index)



[Embeddings Index CLI reference](https://www.sanity.io/docs/libraries/embeddings-index-cli-reference)



[HTTP API reference](https://www.sanity.io/docs/http-reference/embeddings-index)



* * *

- Security



[Access Your Data (CORS)](https://www.sanity.io/docs/content-lake/cors)



[Browser security & CORS](https://www.sanity.io/docs/content-lake/browser-security-and-cors)



[Keeping your data safe](https://www.sanity.io/docs/content-lake/keeping-your-data-safe)



[Activity Feed](https://www.sanity.io/docs/platform-management/activity-feed)



* * *

- Reference



[GROQ Specification](https://spec.groq.dev/)



[Common Sanity document types](https://www.sanity.io/docs/content-lake/document-reference)



[HTTP API](https://www.sanity.io/docs/http-reference)



[Roles and permissions](https://www.sanity.io/docs/content-lake/roles-concepts)



[URL Format](https://www.sanity.io/docs/content-lake/http-urls)



[Authentication](https://www.sanity.io/docs/content-lake/http-auth)



[Using JSONMatch](https://www.sanity.io/docs/content-lake/json-match)



[IP addresses used by Sanity](https://www.sanity.io/docs/content-lake/ip-addresses)



* * *


Content Lake (Datastore)Last updated January 29, 2026

# GROQ-powered webhooks

Copy article

- [Article](https://www.sanity.io/docs/content-lake/webhooks)
- [Changelog](https://www.sanity.io/docs/content-lake/webhooks/changelog)

Send customized HTTP requests when something in your content lake has changed. Use GROQ to define which documents should trigger a webhook and what its payload should be.

[**Webhooks at a glance**](https://www.sanity.io/docs/content-lake/webhooks#b20c21263c8b "Copy link to this section")

Webhooks are a way to integrate applications with automated HTTP requests. Typically you use it to connect services by creating a special URL that accepts incoming requests. What happens when the request resolves depends on the application or service.

#### Webhooks are typically used for, but not limited to:

- Setting up notifications to systems like Slack, Discord, or email services
- Keep external logs and update auditing systems
- Update content in other services
- Trigger automation and workflows

Some services only support receiving webhooks; others can both receive and send them. The Sanity Content Lake supports both sophisticated outgoing webhooks, and receiving incoming webhooks to any appropriate API endpoint, provided they have the proper payload and authentication.

[**Webhooks in your Sanity Content Lake**](https://www.sanity.io/docs/content-lake/webhooks#k0886e01e4e1f "Copy link to this section")

You can create and manage outgoing webhooks in the API section of your project settings, which you'll find at [sanity.io/manage](https://www.sanity.io/manage). Webhooks can also be managed through the CLI or directly through the project APIs.

![API settings with the webhook overview showing a “Trigger site rebuild” webhook.](https://cdn.sanity.io/images/3do82whm/next/13bdd207a065dbdc51d06151b1a170d40cc26378-1053x624.png?w=3840&q=75&fit=clip&auto=format)

[**Configuration**](https://www.sanity.io/docs/content-lake/webhooks#ad0fe6159229 "Copy link to this section")

The following fields are available for webhooks. You can find them all under the webhooks section under the API in your project's settings on [sanity.io/manage](https://www.sanity.io/manage).

[**Name and description**](https://www.sanity.io/docs/content-lake/webhooks#k02ecb4834c3f "Copy link to this section")

You can name your webhooks and give them a description. The description field, while optional, is a useful way to add helpful context about your webhook.

[**URL**](https://www.sanity.io/docs/content-lake/webhooks#k6587655a7ea3 "Copy link to this section")

The URL field is where you specify the endpoint to which the webhook request is sent. If you want to test the webhook before entering the production endpoint, you can use services like [webhook.site](https://webhook.site/), or [Beeceptor](https://beeceptor.com/). You can also use [ngrok](https://ngrok.com/) or [Localtunnel](https://localtunnel.github.io/www/) to test a hook against your local environment.

[**Trigger on**](https://www.sanity.io/docs/content-lake/webhooks#e581e37ea413 "Copy link to this section")

Webhooks can be triggered when a document is **created**, **updated**, **deleted**, or any combination of these.

- **Create** \- triggers on the creation of a new document.
- **Update** \- triggers on every change to a document once created.
- **Delete** \- triggers on the deletion of a document

Between these, you'll be able to react to all major interactions with the documents in question.

#### Pro tip!

By default, your webhooks will not trigger on draft or version events. They will only trigger when changes to the document are published and not for every single occurrence while you edit. Triggering on draft and version events can be enabled, but be careful or you may end up causing huge amounts of traffic to your endpoint!

[**Filter**](https://www.sanity.io/docs/content-lake/webhooks#k91782e1e61eb "Copy link to this section")

A GROQ filter specifying which documents will, when changed, trigger your webhook. A filter is what you commonly see between the `*[` and `]` in a GROQ query. This field supports all the GROQ functions you'd expect and has additional support for functions in the [`delta::`](https://www.sanity.io/docs/specifications/groq-functions#a64594a50318) namespace, as well as [`before() and after()`](https://www.sanity.io/docs/specifications/groq-functions#bbcf50816968).

If left empty, it will apply to all documents (`*[]`).

Webhook filter does not support the following kind of queries and will just yield to `false`:

- Sub-queries, e.g. `_type == "book" && author._ref in *[_type=="author" && name=="John Doe"]._id`
- Cross dataset references: `_type == "book" && author->featured` where author is a [cross-dataset reference](https://www.sanity.io/docs/studio/cross-dataset-references).

See our [Intro to Filters](https://www.sanity.io/docs/developer-guides/filters-in-groq-powered-webhooks) guide for tips on using filters in webhooks.

[**Projection**](https://www.sanity.io/docs/content-lake/webhooks#ec3825cee6a6 "Copy link to this section")

A GROQ projection defining the payload (or body) of the outgoing webhook request. This field supports GROQ functions in the [`delta::`](https://www.sanity.io/docs/specifications/groq-functions#a64594a50318) namespace, as well as [`before() and after()`](https://www.sanity.io/docs/specifications/groq-functions#bbcf50816968).

If left empty, it will include the whole document _after_ the change that triggered it.

#### Gotcha

“Sub-queries” are not supported for webhook projections. For example, the following query will _not_ work: `{ "relatedPost": *[^._id in related[]._ref]{_id, title, slug}}`

See our [Intro to Projections](https://www.sanity.io/docs/developer-guides/projections-in-groq-powered-webhooks) guide for tips on using projections in webhooks.

[**Status**](https://www.sanity.io/docs/content-lake/webhooks#k96d3725e18f5 "Copy link to this section")

Enable or disable your webhook.

#### Disabling webhooks

When a webhook is disabled all pending requests will be canceled.

[**HTTP method**](https://www.sanity.io/docs/content-lake/webhooks#ead6bd6003d5 "Copy link to this section")

This field configures the webhook's [HTTP request method](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods). It can be set to POST, PUT, PATCH, DELETE, or GET. Some endpoints require incoming requests to use a specific method to work.

[**HTTP headers**](https://www.sanity.io/docs/content-lake/webhooks#k9e95a88c5931 "Copy link to this section")

Additional HTTP headers. You can add multiple headers. A common example is adding an `Authorization: Bearer <token>` header to authenticate the webhook request.

#### Gotcha

Be mindful if you share webhooks that header configuration will be included with sensitive information if you don't remove it before sharing the link.

A webhook will always include the following headers and values:

- [connection](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Connection): close
- [accept-encoding](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding): gzip
- idempotency-key: <a unique key> See documentation below.
- [content-type](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type): application/json
- [content-length](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Length): <the length of the payload in bytes>
- [user-agent](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent): [Sanity.io](http://sanity.io/) webhook delivery
- [host](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Host): <the endpoint URL host>

As well as the following Sanity-specific headers that can be useful for logging and debugging your webhooks:

- `sanity-transaction-id`: ID of transaction.
- `sanity-transaction-time`: Timestamp of transaction.
- `sanity-dataset`: Name of dataset (also available in projection today as `sanity::dataset()`).
- `sanity-document-id`: Document ID being notified about.
- `sanity-project-id`: ID of project (also available in projection today as `sanity::projectId()`).
- `sanity-webhook-id`: ID of webhook.
- `sanity-operation`: Either create, update or delete

#### Info

The projection will always be returned as JSON. If you for some reason need it to be another content type, you’ll have to pass it through a serverless function or a custom endpoint and do the transformation there.

[**API version**](https://www.sanity.io/docs/content-lake/webhooks#e3c10f6afb94 "Copy link to this section")

Defaults to the `v2021-03-25` of the query API. Can be overridden using the [Webhooks API](https://www.sanity.io/docs/http-reference/webhooks) in cases where you want to create webhooks with old behavior that might have been deprecated.

[**Drafts and versions**](https://www.sanity.io/docs/content-lake/webhooks#k5cdeefd3d139 "Copy link to this section")

By default, documents in the `drafts.` and `versions.` ID-namespace will be automatically ignored. Enable the drafts or version setting if you want the triggers and filter to apply to draft or version documents. Note: version support was added in version 2025-02-19.

#### Gotcha

This might cause a lot of webhooks to trigger whenever someone is working inside Sanity Studio, since almost every keystroke represents an `update`. Webhooks are limited to 1 concurrent request, but you should also make sure that your endpoint is able to handle the incoming events.

[**Secret**](https://www.sanity.io/docs/content-lake/webhooks#bfa1758643b3 "Copy link to this section")

To let receiving services verify the origin of any outgoing webhook, you may add a secret that will be hashed and included as part of the webhook request's headers. You may find our [webhook toolkit library](https://github.com/sanity-io/webhook-toolkit) helpful for working with secrets. If you want to roll your own; we model the encryption and decryption of secrets on the same standard as [Stripe](https://stripe.com/docs/webhooks/signatures#verify-manually).

[**Idempotency-key**](https://www.sanity.io/docs/content-lake/webhooks#k3e9b7dac38b7 "Copy link to this section")

Requests include a new header that can be used to de-duplicate deliveries: `idempotency-key`.

This is necessary because webhooks will sometimes be retried, and our system has _at least one_ delivery. Using the unique idempotency key lets the receiver ignore messages it has already received.

We follow [this new draft standard](https://datatracker.ietf.org/doc/draft-ietf-httpapi-idempotency-key-header/) for idempotency.

[**Sharing webhooks**](https://www.sanity.io/docs/content-lake/webhooks#k3a84ab21cd0b "Copy link to this section")

Webhook configurations can be shared with a URL. This is practical if you want to quickly repurpose webhooks across projects or share with the community. You can generate a share URL by going to [sanity.io/manage/webhooks/share](https://www.sanity.io/manage/webhooks/share) or by finding the share button in the three-dot-menu in the webhooks overview.

#### Gotcha

Note that all the configuration is stored as part of the URL. Be mindful of any sensitive information that might be part of the configuration and that it will be shared in plain text. It can be wise to replace secret tokens and so on with capitalized placeholder text.

[**Debugging webhooks**](https://www.sanity.io/docs/content-lake/webhooks#fba4a0f4c743 "Copy link to this section") [**Attempts log**](https://www.sanity.io/docs/content-lake/webhooks#k04aa9f9c8d52 "Copy link to this section")

#### Protip

Use the attempts log to determine whether your webhooks are being successfully delivered.

You can find the attempts log if you click the three-dotted menu for a given webhook. The log will include information about the response a webhook request got. The attempts log is available as an [API endpoint](https://www.sanity.io/docs/http-reference/webhooks) at:

```
https://api.sanity.io/v2021-10-04/hooks/projects/${projectId}/${id}/attempts
```

[**Message log**](https://www.sanity.io/docs/content-lake/webhooks#k1cd88aacb12e "Copy link to this section")

#### Protip

Use the message log if you want to know whether all outstanding messages for a webhook have been delivered.

The message log is available as an [API endpoint](https://www.sanity.io/docs/http-reference/webhooks) at:

```
https://${projectId}.api.sanity.io/v2021-10-04/hooks/${id}/messages
```

The log contains a list of messages in the queue and any delivery attempts for each:

- If all the messages returned have the status `queued` then your processing has fallen behind. This may indicate that your webhook processing is too slow and/or that your webhook filter is too broad and is generating a vast number of messages.
- If your webhook request handler takes longer to process a message than the rate at which you are generating changes that trigger the webhook then the queue will never be cleared.

[**HTTP Status codes**](https://www.sanity.io/docs/content-lake/webhooks#ccbbc7f0d085 "Copy link to this section")

The HTTP status codes are used to determine if delivery is successful:

- 200-range will be treated as a success
- 400-range will be treated as undeliverable, as the server said it was a client error (with one exception—see next item)
- 429 will be retried using an exponential back-off pattern
- 500-range will be retried using an exponential back-off pattern

[**Technical limits, retries, and timeouts**](https://www.sanity.io/docs/content-lake/webhooks#k33326b412b2d "Copy link to this section")

Webhooks are limited to 1 concurrent request.

We will retry sending a Webhook request for up to 30 minutes with an exponential back-off. This limit is subject to changes in the future.

A webhook request will time out after 30 seconds.

[**Webhooks origin IP addresses**](https://www.sanity.io/docs/content-lake/webhooks#k2a62c34f67fa "Copy link to this section")

The full list of IP addresses that Sanity webhooks calls originate from, can be found on this file:

[https://www.sanity.io/files/webhooks-egress-ips.txt](https://www.sanity.io/files/webhooks-egress-ips.txt)

The IP addresses generally don’t change but they may be updated from time to time, on planned or unplanned/emergency maintenance. For planned changes, we aim to announce upcoming changes 7 days in advance on Sanity’s status page feed here: [https://www.sanity-status.com/](https://www.sanity-status.com/#). Unplanned maintenance changes will happen without notice, but the URL file will be immediately up-to-date.

#### Gotcha

If you’re aiming to use these addresses for IP filtering/security purposes, make sure you keep your tooling up-to-date with the URL above in an automated/unattended way.

[Previous **Listening API**](https://www.sanity.io/docs/content-lake/realtime-updates) [Next **Best practices**](https://www.sanity.io/docs/content-lake/webhook-best-practices)

Was this page helpful?

Report issue

## On this page

- [Webhooks at a glance](https://www.sanity.io/docs/content-lake/webhooks#b20c21263c8b)
- [Webhooks in your Sanity Content Lake](https://www.sanity.io/docs/content-lake/webhooks#k0886e01e4e1f)
- [Configuration](https://www.sanity.io/docs/content-lake/webhooks#ad0fe6159229)
- [Name and description](https://www.sanity.io/docs/content-lake/webhooks#k02ecb4834c3f)
- [URL](https://www.sanity.io/docs/content-lake/webhooks#k6587655a7ea3)
- [Trigger on](https://www.sanity.io/docs/content-lake/webhooks#e581e37ea413)
- [Filter](https://www.sanity.io/docs/content-lake/webhooks#k91782e1e61eb)
- [Projection](https://www.sanity.io/docs/content-lake/webhooks#ec3825cee6a6)
- [Status](https://www.sanity.io/docs/content-lake/webhooks#k96d3725e18f5)
- [HTTP method](https://www.sanity.io/docs/content-lake/webhooks#ead6bd6003d5)
- [HTTP headers](https://www.sanity.io/docs/content-lake/webhooks#k9e95a88c5931)
- [API version](https://www.sanity.io/docs/content-lake/webhooks#e3c10f6afb94)
- [Drafts and versions](https://www.sanity.io/docs/content-lake/webhooks#k5cdeefd3d139)
- [Secret](https://www.sanity.io/docs/content-lake/webhooks#bfa1758643b3)
- [Idempotency-key](https://www.sanity.io/docs/content-lake/webhooks#k3e9b7dac38b7)
- [Sharing webhooks](https://www.sanity.io/docs/content-lake/webhooks#k3a84ab21cd0b)
- [Debugging webhooks](https://www.sanity.io/docs/content-lake/webhooks#fba4a0f4c743)
- [Attempts log](https://www.sanity.io/docs/content-lake/webhooks#k04aa9f9c8d52)
- [Message log](https://www.sanity.io/docs/content-lake/webhooks#k1cd88aacb12e)
- [HTTP Status codes](https://www.sanity.io/docs/content-lake/webhooks#ccbbc7f0d085)
- [Technical limits, retries, and timeouts](https://www.sanity.io/docs/content-lake/webhooks#k33326b412b2d)
- [Webhooks origin IP addresses](https://www.sanity.io/docs/content-lake/webhooks#k2a62c34f67fa)

[Sanity logosanity.io](https://www.sanity.io/?ref=content-lake-webhooks "Go to marketing site") [All Systems Operational](https://www.sanity-status.com/ "Status: All Systems Operational") © Sanity 2026Cookie preferencesChange Site Theme
Light mode

System theme

Dark mode